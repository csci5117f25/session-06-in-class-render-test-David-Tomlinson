<!DOCTYPE html>
<html>
<head>
    <title>Guestbook</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Guestbook</h1>
    
    
    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <p><strong>{{ message }}</strong></p>
            {% endfor %}
        {% endif %}
    {% endwith %}
    
    <!-- Guestbook Form -->
    <h2>Sign the Guestbook</h2>
    <form action="/guestbook" method="POST">
        <p>
            <label for="name">Your Name:</label><br>
            <input type="text" id="name" name="name" required maxlength="100" size="50">
        </p>
        
        <p>
            <label for="message">Your Message:</label><br>
            <textarea id="message" name="message" rows="4" cols="50" required maxlength="500"></textarea>
        </p>
        
        <p>
            <input type="submit" value="Sign Guestbook">
        </p>
    </form>

    <!-- Guestbook Entries -->
    <h2>Recent Entries</h2>
    
    {% if entries %}
        {% for entry in entries %}
        <hr>
        <p><strong>{{ entry.name }}</strong> - {{ entry.created_at.strftime('%B %d, %Y at %I:%M %p') }}</p>
        <p>{{ entry.message }}</p>
        {% endfor %}
        
        <!-- Pagination -->
        {% if total_pages > 1 %}
        <hr>
        <p>
            {% if current_page > 0 %}
                <a href="/guestbook?page={{ current_page - 1 }}">← Previous</a>
            {% endif %}
            
            Page {{ current_page + 1 }} of {{ total_pages }}
            
            {% if current_page < total_pages - 1 %}
                <a href="/guestbook?page={{ current_page + 1 }}">Next →</a>
            {% endif %}
        </p>
        {% endif %}
    {% else %}
        <p><em>No entries yet. Be the first to sign the guestbook!</em></p>
    {% endif %}
    
    <!-- Navigation -->
    <hr>
    <div class="navigation">
        <p><a href="/">← Back to Home</a></p>
    </div>
</body>
</html>
